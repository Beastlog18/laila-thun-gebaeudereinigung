<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jobs – Laila Thun Gebäudereinigung</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="header">
  <img src="img/Logo.png" class="header-logo" alt="Logo">

  <div class="brand-header">
    <div class="brand-line1">LAILA THUN</div>
    <div class="brand-line2">GEBÄUDEREINIGUNG</div>
    <div class="brand-divider"></div>
  </div>

  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="ueber-uns.html">Über uns</a>
    <a href="leistungen.html">Leistungen</a>
    <a href="kontakt.html">Kontakt</a>
    <a href="jobs.html" class="active">Jobs</a>
  </nav>
</header>

<section class="section">
  <h1 class="page-title">Jobs</h1>

  <p class="mb-18">
    Wir wachsen – und freuen uns über Unterstützung. Hier werden offene Stellen veröffentlicht.
  </p>

  <!-- DYNAMISCHE JOBS -->
  <div id="jobsDynamic" class="service-grid" style="display:none;"></div>

  <!-- FALLBACK (statisch) -->
  <div id="jobsFallback" class="service-grid">
    <div class="service-card">
      <h3>Reinigungskraft (m/w/d)</h3>
      <p>Teilzeit / Minijob · Raum Königs Wusterhausen / Berlin</p>
      <p class="mt-14">
        Zuverlässig, freundlich, gründlich. Erfahrung ist gut, aber nicht zwingend – wir arbeiten dich ein.
      </p>
      <div class="mt-14">
        <a class="btn btn-primary" href="kontakt.html">Jetzt bewerben</a>
      </div>
    </div>
  </div>

  <p class="mt-16 text-small text-muted">
    Hinweis: Das Bewerbungsformular (Upload Lebenslauf etc.) wird im Admin-Ausbau ergänzt.
  </p>
</section>

<footer class="footer">
  <div>© 2026 Laila Thun Gebäudereinigung · Konzept & Gestaltung: Mayk Freund</div>
  <div class="footer-links">
    <a href="impressum.html">Impressum</a>
    <span>·</span>
    <a href="datenschutz.html">Datenschutz</a>
  </div>
</footer>

<script>
(function () {
  const STORAGE_KEY = "ltg_jobs_v1";

  function loadJobs() {
    try {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return [];
      const data = JSON.parse(raw);
      return Array.isArray(data) ? data : [];
    } catch {
      return [];
    }
  }

  function splitPreview(preview) {
    const lines = preview.split("\n");
    return lines.slice(3).join("\n").trim();
  }

  function buildMeta(job) {
    const parts = [];
    if (job.type) parts.push(job.type);
    if (job.hours) parts.push(job.hours + " Std./Woche");
    if (job.location) parts.push(job.location);
    return parts.join(" · ");
  }

  function render() {
    const jobs = loadJobs().filter(j => j.published && j.preview);

    const dyn = document.getElementById("jobsDynamic");
    const fb = document.getElementById("jobsFallback");

    if (!jobs.length) {
      dyn.style.display = "none";
      fb.style.display = "grid";
      return;
    }

    fb.style.display = "none";
    dyn.style.display = "grid";
    dyn.innerHTML = "";

    jobs.forEach(job => {
      const card = document.createElement("div");
      card.className = "service-card";
      card.style.gridColumn = "1 / -1";

      const bodyText = splitPreview(job.preview);
      const meta = buildMeta(job);

      card.innerHTML = `
        <h3>${job.title || "Stellenangebot"}</h3>
        ${meta ? `<p>${meta}</p>` : ""}

        <pre class="mt-14" style="white-space:pre-wrap;font-family:inherit;">${bodyText}</pre>

        <div class="mt-14">
          <a class="btn btn-primary" href="kontakt.html">Jetzt bewerben</a>
        </div>
      `;

      dyn.appendChild(card);
    });
  }

  document.addEventListener("DOMContentLoaded", render);
})();
</script>

</body>
</html>
